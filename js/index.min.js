const ratio=window.devicePixelRatio||1,titleAnimation="text 17s ease-in-out 0s infinite",shiftingAnimation="shift 2s linear 0s infinite",small=500,extraWide=1800,extraExtraWide=2400;var isPlaying=!window.matchMedia("(prefers-reduced-motion)").matches,menuOpen=!1;const palette=[{f:"#aaafb9",bg:"none"},{f:"#FFF",bg:"none"},{f:"#000",bg:"#FFF"}];var cIndex=0;function animate(e,t){e.style.webkitAnimation=t,e.style.mozAnimation=t,e.style.oAnimation=t,e.style.msTransition=t,e.style.animation=t}function hideRevealPlayPauseButtons(){const e=document.getElementsByClassName("play"),t=document.getElementsByClassName("pause");if(isPlaying){for(i=0;i<e.length;i++)e[i].style.visibility="hidden";for(i=0;i<t.length;i++)t[i].style.visibility="visible"}else{for(i=0;i<e.length;i++)e[i].style.visibility="visible";for(i=0;i<t.length;i++)t[i].style.visibility="hidden"}}function commonPlayPause(){const e=document.getElementById("shifting-background");animate(e,isPlaying?"none":shiftingAnimation),isPlaying=!isPlaying,hideRevealPlayPauseButtons()}function commonScaleElements(){var e;if(window.innerWidth<500){const e=document.getElementsByClassName("td-hidden-at-small");for(i=0;i<e.length;i++)e[i].style.display="none"}else{const e=document.getElementsByClassName("td-hidden-at-small");for(i=0;i<e.length;i++)e[i].style.display="table-cell"}e=window.innerWidth>2400?2:1;const t=getComputedStyle(document.documentElement).getPropertyValue("--scale");if(t!=e){document.documentElement.style.setProperty("--scale",e);const l=document.getElementById("menu-wrapper");for(i=0;i<l.childElementCount;i++)if(l.children[i].classList.contains("unscalable")){const r=[];for(r.push({k:"r",v:l.children[i].getAttribute("r")}),r.push({k:"x",v:l.children[i].getAttribute("x")}),r.push({k:"y",v:l.children[i].getAttribute("y")}),r.push({k:"cx",v:l.children[i].getAttribute("cx")}),r.push({k:"cy",v:l.children[i].getAttribute("cy")}),r.push({k:"rx",v:l.children[i].getAttribute("rx")}),r.push({k:"ry",v:l.children[i].getAttribute("ry")}),r.push({k:"width",v:l.children[i].getAttribute("width")}),r.push({k:"height",v:l.children[i].getAttribute("height")}),r.push({k:"stroke-width",v:l.children[i].getAttribute("stroke-width")}),ii=0;ii<r.length;ii++)if(r[ii]){var n=parseInt(r[ii].v);n==n&&(t<e?n*=2:n/=2,l.children[i].setAttribute(r[ii].k,n))}const c=l.children[i].getAttribute("points");if(c){var s="";const n=c.split(" ");for(iii=0;iii<n.length;iii++){iii>0&&iii<n.length&&(s+=" ");const i=n[iii].split(",");var o=parseInt(i[0]),a=parseInt(i[1]);t<e?(o*=2,a*=2):(o/=2,a/=2),s=s+o+","+a}l.children[i].setAttribute("points",s)}}document.documentElement.style.setProperty("--scale",e)}}function commonLoad(){hideRevealPlayPauseButtons();const e=window.location.search.replace("?","").split("&");for(i=0;i<e.length;i++){const t=e[i].toLowerCase();if("pause"==t){playPause&&playPause();break}if(t.includes("palette"))try{const t=e[i].split("=");changeColor(parseInt(t[1]))}catch{}}return e}function toggleMenu(){const e=document.getElementsByClassName("menu"),t=document.getElementsByClassName("menu-item"),n=document.getElementById("menu-wrapper"),s=document.getElementById("stop-button");if(menuOpen){for(i=0;i<t.length;i++)animate(t[i],"hideMenuItems 0.5s ease-in-out 0s forwards");for(i=0;i<e.length;i++)animate(e[i],"closeMenu 0.5s ease-in-out 0s forwards");animate(n,"closeMenu2 0.5s ease-in-out 0s forwards"),animate(s,"closeStopButton 0.5s ease-in-out 0s forwards")}else{for(i=0;i<t.length;i++){const e=i<10?"0"+i:i;animate(t[i],"revealMenuItems 0.5s ease-in-out 0."+e+"s forwards")}for(i=0;i<e.length;i++)animate(e[i],"openMenu 0.5s ease-in-out 0s forwards");animate(n,"openMenu2 0.5s ease-in-out 0s forwards"),animate(s,"openStopButton 0.5s ease-in-out 0s forwards")}menuOpen=!menuOpen}function changeColor(e){e&&e<palette.length?cIndex=e:cIndex>=palette.length-1?cIndex=0:cIndex+=1,document.documentElement.style.setProperty("--defaultTextColor",palette[cIndex].f);var t=palette[cIndex].bg;document.documentElement.style.setProperty("--defaultBackgroundColor",t)}function link(e,t){var i="";i=t||"?",isPlaying||(i+=("?"===i?"":"&")+"pause"),cIndex>0&&(i+=("?"===i?"":"&")+"palette="+cIndex),window.location.href=e+i}function home(e){link(e,"?skip")}function scaleInnerCircles(e,t){const n=document.getElementsByClassName("inner-circle");for(i=0;i<n.length;i++){n[i].setAttribute("cx",t/2+"px"),n[i].setAttribute("cy",e/2+"px");var s=t/3;t>e&&(s=e/3),s<100&&(s=100),n[i].setAttribute("r",s+"px")}}
window.onload=load,window.addEventListener("resize",scaleElements);const subtitleAnimation="text 11s ease-in-out 0s infinite",hideAnimation="hide 1s linear forwards",revealAnimation="reveal 1s linear forwards",postTitleAnimation="text 7s ease-in-out 0s infinite";var hasNavigated=!1;function scaleElements(){commonScaleElements(),window.scrollTo(0,0);const e=window.innerHeight,t=window.innerWidth,n=t<950||e<500||e>t;if(!hasNavigated){scaleInnerCircles(e,t);const c=[];var l="24pt",a="14pt",s="14pt";t>small&&(l="48px",a="24px",s="20px"),t>extraWide&&(l="64px",a="36px",s="28px"),t>extraExtraWide&&(l="72px",a="48px",s="36px"),c.push(document.getElementById("title")),c.push(document.getElementById("animated-title")),c.push(document.getElementById("subtitle")),c.push(document.getElementById("animated-subtitle"));var o=0,m=0;for(i=0;i<c.length;i++)if(c[i]){var d=0;c[i].style.left=0,c[i].id.includes("subtitle")?(d+=65,c[i].style.fontSize=a,t>extraWide&&(d+=30)):c[i].style.fontSize=l;var y=c[i].getBoundingClientRect();const s=t/2-y.width/2;n?c[i].style.left=s+"px":(d+=100,c[i].style.left=t/2+"px"),c[i].style.top=e/2+d+"px",(y=c[i].getBoundingClientRect()).right>o&&(o=y.right),y.bottom>m&&(m=y.bottom)}var r=document.getElementById("navigate");if(r){r.left=0,r.style.top=m+"px",r.style.fontSize=s;const e=r.getBoundingClientRect();if(n)r.style.left=t/2-e.width/2+"px";else{d=.9*t;r.style.left=o>d?d-e.width+"px":o-e.width+"px"}}}const c=document.getElementById("posts");c&&(c.style.maxWidth=t>950?"50%":"90%");const g=document.getElementsByClassName("post-title");for(i=0;i<g.length;i++)g[i].style.fontSize="18pt",t>extraWide&&(g[i].style.fontSize="24pt"),t>extraExtraWide&&(g[i].style.fontSize="36pt");const u=document.getElementsByClassName("post-description");for(i=0;i<u.length;i++)u[i].style.fontSize="14pt",t>extraWide&&(u[i].style.fontSize="20pt"),t>extraExtraWide&&(u[i].style.fontSize="28pt");const h=document.getElementsByClassName("chapters");for(i=0;i<h.length;i++)h[i].style.fontSize="14pt",t>extraWide&&(h[i].style.fontSize="20pt"),t>extraExtraWide&&(h[i].style.fontSize="28pt");const p=document.getElementsByClassName("description-wrapper");for(i=0;i<p.length;i++)p[i].style.maxHeight?p[i].style.maxHeight=p[i].scrollHeight+"px":p[i].style.maxHeight=null}function animatePostTitle(){animate(this.firstElementChild,postTitleAnimation)}function clearAnimation(){animate(this.firstElementChild,null)}function load(){scaleElements();const e=document.getElementsByClassName("circle");for(i=0;i<e.length;i++)e[i].style.visibility="visible";document.getElementById("title-wrapper").style.visibility="visible";const t=document.getElementsByClassName("post-title");for(i=0;i<t.length;i++)t[i].addEventListener("click",(function(){var e=this.nextElementSibling;e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px"})),t[i].onmouseenter=animatePostTitle,t[i].onmouseleave=clearAnimation;const n=commonLoad();for(i=0;i<n.length;i++)if("skip"==n[i].toLowerCase()){isPlaying?(isPlaying=!1,revealPosts(),isPlaying=!0):revealPosts();break}}function playPause(){const e=document.getElementById("animated-title"),t=document.getElementById("animated-subtitle"),n=document.getElementsByClassName("post-title");if(isPlaying)for(hasNavigated||(animate(e,"none"),animate(t,"none")),i=0;i<n.length;i++)n[i].onmouseenter=null,n[i].onmouseleave=null;else for(hasNavigated||(animate(e,titleAnimation),animate(t,subtitleAnimation)),i=0;i<n.length;i++)n[i].onmouseenter=animatePostTitle,n[i].onmouseleave=clearAnimation;commonPlayPause()}function revealPosts(){if(!hasNavigated){hasNavigated=!0;const e=document.getElementsByClassName("circle"),t=document.getElementsByClassName("menu"),n=document.getElementById("animated-title"),l=document.getElementById("animated-subtitle"),a=document.getElementById("title"),s=document.getElementById("subtitle"),o=document.getElementById("navigate"),m=document.getElementById("posts"),d=document.getElementById("menu-wrapper");for(i=0;i<e.length;i++)isPlaying?animate(e[i],hideAnimation):e[i].style.visibility="hidden";for(i=0;i<t.length;i++)isPlaying&&animate(t[i],"glitchInColor 1s linear 0s forwards");m.style.display="inherit",isPlaying?(animate(n,hideAnimation),animate(l,hideAnimation),animate(s,hideAnimation),animate(a,hideAnimation),animate(o,hideAnimation),animate(m,revealAnimation),d.style.visibility="visible",animate(d,"glitchIn 1s linear 0s forwards")):(animate(n,"none"),animate(l,"none"),animate(s,"none"),animate(a,"none"),animate(o,"none"),animate(m,"none"),n.style.visibility="hidden",l.style.visibility="hidden",s.style.visibility="hidden",a.style.visibility="hidden",o.style.visibility="hidden",m.style.visibility="visible",m.style.opacity=100,d.style.visibility="visible")}}
