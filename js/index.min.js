const ratio=window.devicePixelRatio||1,titleAnimation="text 17s ease-in-out 0s infinite",shiftingAnimation="shift 2s linear 0s infinite",small=500,extraWide=1800,extraExtraWide=2400;var isPlaying=!window.matchMedia("(prefers-reduced-motion)").matches,menuOpen=!1;const palette=[{f:"#aaafb9",bg:"none"},{f:"#FFF",bg:"none"},{f:"#000",bg:"#FFF"}];var cIndex=0;function animate(e,t){e.style.webkitAnimation=t,e.style.mozAnimation=t,e.style.oAnimation=t,e.style.msTransition=t,e.style.animation=t}function hideRevealPlayPauseButtons(){const e=document.getElementsByClassName("play"),t=document.getElementsByClassName("pause");if(isPlaying){for(i=0;i<e.length;i++)e[i].style.visibility="hidden";for(i=0;i<t.length;i++)t[i].style.visibility="visible"}else{for(i=0;i<e.length;i++)e[i].style.visibility="visible";for(i=0;i<t.length;i++)t[i].style.visibility="hidden"}}function commonPlayPause(){const e=document.getElementById("shifting-background");animate(e,isPlaying?"none":shiftingAnimation),isPlaying=!isPlaying,hideRevealPlayPauseButtons()}function commonScaleElements(e){var t;if(window.innerWidth<500){const e=document.getElementsByClassName("td-hidden-at-small");for(i=0;i<e.length;i++)e[i].style.display="none"}else{const e=document.getElementsByClassName("td-hidden-at-small");for(i=0;i<e.length;i++)e[i].style.display="table-cell"}t=window.innerWidth>2400?2:1;const n=document.getElementById("menu-wrapper");if(!e&&!0===hasNavigated){menuOpen=!1;const e=document.getElementById("stop-button"),t=document.getElementsByClassName("menu"),s=document.getElementsByClassName("menu-items");for(animate(n,null),animate(e,null),i=0;i<t.length;i++)animate(t[i],null);for(i=0;i<s.length;i++)animate(s[i],null)}const s=getComputedStyle(document.documentElement).getPropertyValue("--scale");if(s!=t){for(document.documentElement.style.setProperty("--scale",t),i=0;i<n.childElementCount;i++)if(n.children[i].classList.contains("unscalable")){const e=[];for(e.push({k:"r",v:n.children[i].getAttribute("r")}),e.push({k:"x",v:n.children[i].getAttribute("x")}),e.push({k:"y",v:n.children[i].getAttribute("y")}),e.push({k:"cx",v:n.children[i].getAttribute("cx")}),e.push({k:"cy",v:n.children[i].getAttribute("cy")}),e.push({k:"rx",v:n.children[i].getAttribute("rx")}),e.push({k:"ry",v:n.children[i].getAttribute("ry")}),e.push({k:"width",v:n.children[i].getAttribute("width")}),e.push({k:"height",v:n.children[i].getAttribute("height")}),e.push({k:"stroke-width",v:n.children[i].getAttribute("stroke-width")}),ii=0;ii<e.length;ii++)if(e[ii]){var l=parseInt(e[ii].v);l==l&&(s<t?l*=2:l/=2,n.children[i].setAttribute(e[ii].k,l))}const u=n.children[i].getAttribute("points");if(u){var a="";const e=u.split(" ");for(iii=0;iii<e.length;iii++){iii>0&&iii<e.length&&(a+=" ");const i=e[iii].split(",");var o=parseInt(i[0]),r=parseInt(i[1]);s<t?(o*=2,r*=2):(o/=2,r/=2),a=a+o+","+r}n.children[i].setAttribute("points",a)}}else n.children[i].classList.contains("menu")&&n.setAttribute("height",n.children[i].getAttribute("width")+7);document.documentElement.style.setProperty("--scale",t)}}function commonLoad(){hideRevealPlayPauseButtons();const e=window.location.search.replace("?","").split("&");for(i=0;i<e.length;i++){const t=e[i].toLowerCase();if("pause"==t){playPause&&playPause();break}if(t.includes("palette"))try{const t=e[i].split("=");changeColor(parseInt(t[1]))}catch{}}return e}function toggleMenu(){const e=document.getElementsByClassName("menu"),t=document.getElementsByClassName("menu-item"),n=document.getElementById("menu-wrapper"),s=document.getElementById("stop-button");if(menuOpen){for(i=0;i<t.length;i++)animate(t[i],"hideMenuItems 0.5s ease-in-out 0s forwards");for(i=0;i<e.length;i++)animate(e[i],"closeMenu 0.5s ease-in-out 0s forwards");animate(n,"closeMenu2 0.5s ease-in-out 0s forwards"),animate(s,"closeStopButton 0.5s ease-in-out 0s forwards")}else{for(i=0;i<t.length;i++){const e=i<10?"0"+i:i;animate(t[i],"revealMenuItems 0.5s ease-in-out 0."+e+"s forwards")}for(i=0;i<e.length;i++)animate(e[i],"openMenu 0.5s ease-in-out 0s forwards");animate(n,"openMenu2 0.5s ease-in-out 0s forwards"),animate(s,"openStopButton 0.5s ease-in-out 0s forwards")}menuOpen=!menuOpen}function changeColor(e){e&&e<palette.length?cIndex=e:cIndex>=palette.length-1?cIndex=0:cIndex+=1,document.documentElement.style.setProperty("--defaultTextColor",palette[cIndex].f);var t=palette[cIndex].bg;document.documentElement.style.setProperty("--defaultBackgroundColor",t)}function link(e,t){var i="";i=t||"?",isPlaying||(i+=("?"===i?"":"&")+"pause"),cIndex>0&&(i+=("?"===i?"":"&")+"palette="+cIndex),window.location.href=e+i}function home(e){link(e,"?skip")}function scaleInnerCircles(e,t){const n=document.getElementsByClassName("inner-circle");for(i=0;i<n.length;i++){n[i].setAttribute("cx",t/2+"px"),n[i].setAttribute("cy",e/2+"px");var s=t/3;t>e&&(s=e/3),s<100&&(s=100),n[i].setAttribute("r",s+"px")}}
window.onload=load,window.addEventListener("resize",(()=>{scaleElements(!1)}));const subtitleAnimation="text 11s ease-in-out 0s infinite",hideAnimation="hide 1s linear forwards",revealAnimation="reveal 1s linear forwards",postTitleAnimation="text 7s ease-in-out 0s infinite";var hasNavigated=!1;function scaleElements(e){commonScaleElements(e),window.scrollTo(0,0);const t=window.innerHeight,n=window.innerWidth,l=n<950||t<500||t>n;if(!hasNavigated){scaleInnerCircles(t,n);const e=[];var a="20pt",s="12pt",o="14pt";n>small&&(a="28px",s="16px",o="18px"),n>extraWide&&(a="36px",s="20px",o="23px"),n>extraExtraWide&&(a="48px",s="28px",o="30px"),e.push(document.getElementById("title")),e.push(document.getElementById("animated-title")),e.push(document.getElementById("subtitle")),e.push(document.getElementById("animated-subtitle"));var m=0,d=0;for(i=0;i<e.length;i++)if(e[i]){var y=0;e[i].style.left=0,e[i].id.includes("subtitle")?(y+=65,e[i].style.fontSize=s,n>extraWide&&(y+=30)):e[i].style.fontSize=a;var r=e[i].getBoundingClientRect();const o=n/2-r.width/2;l?e[i].style.left=o+"px":(y+=100,e[i].style.left=n/2+"px"),e[i].style.top=t/2+y+"px",(r=e[i].getBoundingClientRect()).right>m&&(m=r.right),r.bottom>d&&(d=r.bottom)}var c=document.getElementById("navigate");if(c){c.left=0,c.style.top=d+"px",c.style.fontSize=o;const e=c.getBoundingClientRect();if(l)c.style.left=n/2-e.width/2+"px";else{y=.9*n;c.style.left=m>y?y-e.width+"px":m-e.width+"px"}}}const g=document.getElementById("posts");g&&(g.style.maxWidth=n>950?"50%":"90%");const u=document.getElementsByClassName("post-title");for(i=0;i<u.length;i++)u[i].style.fontSize="18pt",n>extraWide&&(u[i].style.fontSize="24pt"),n>extraExtraWide&&(u[i].style.fontSize="36pt");const h=document.getElementsByClassName("post-description");for(i=0;i<h.length;i++)h[i].style.fontSize="14pt",n>extraWide&&(h[i].style.fontSize="20pt"),n>extraExtraWide&&(h[i].style.fontSize="28pt");const p=document.getElementsByClassName("chapters");for(i=0;i<p.length;i++)p[i].style.fontSize="14pt",n>extraWide&&(p[i].style.fontSize="20pt"),n>extraExtraWide&&(p[i].style.fontSize="28pt");const f=document.getElementsByClassName("description-wrapper");for(i=0;i<f.length;i++)f[i].style.maxHeight?f[i].style.maxHeight=f[i].scrollHeight+"px":f[i].style.maxHeight=null}function animatePostTitle(){animate(this.firstElementChild,postTitleAnimation)}function clearAnimation(){animate(this.firstElementChild,null)}function load(){scaleElements(!0);const e=document.getElementsByClassName("circle");for(i=0;i<e.length;i++)e[i].style.visibility="visible";document.getElementById("title-wrapper").style.visibility="visible";const t=document.getElementsByClassName("post-title");for(i=0;i<t.length;i++)t[i].addEventListener("click",(function(){var e=this.nextElementSibling;e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px"})),t[i].onmouseenter=animatePostTitle,t[i].onmouseleave=clearAnimation;const n=commonLoad();for(i=0;i<n.length;i++)if("skip"==n[i].toLowerCase()){isPlaying?(isPlaying=!1,revealPosts(),isPlaying=!0):revealPosts();break}}function playPause(){const e=document.getElementById("animated-title"),t=document.getElementById("animated-subtitle"),n=document.getElementsByClassName("post-title");if(isPlaying)for(hasNavigated||(animate(e,"none"),animate(t,"none")),i=0;i<n.length;i++)n[i].onmouseenter=null,n[i].onmouseleave=null;else for(hasNavigated||(animate(e,titleAnimation),animate(t,subtitleAnimation)),i=0;i<n.length;i++)n[i].onmouseenter=animatePostTitle,n[i].onmouseleave=clearAnimation;commonPlayPause()}function revealPosts(){if(!hasNavigated){hasNavigated=!0;const e=document.getElementsByClassName("circle"),t=document.getElementsByClassName("menu"),n=document.getElementById("animated-title"),l=document.getElementById("animated-subtitle"),a=document.getElementById("title"),s=document.getElementById("subtitle"),o=document.getElementById("navigate"),m=document.getElementById("posts"),d=document.getElementById("menu-wrapper");for(i=0;i<e.length;i++)isPlaying?animate(e[i],hideAnimation):e[i].style.visibility="hidden";for(i=0;i<t.length;i++)isPlaying&&animate(t[i],"glitchInColor 1s linear 0s forwards");m.style.display="inherit",isPlaying?(animate(n,hideAnimation),animate(l,hideAnimation),animate(s,hideAnimation),animate(a,hideAnimation),animate(o,hideAnimation),animate(m,revealAnimation),d.style.visibility="visible",animate(d,"glitchIn 1s linear 0s forwards")):(animate(n,"none"),animate(l,"none"),animate(s,"none"),animate(a,"none"),animate(o,"none"),animate(m,"none"),n.style.visibility="hidden",l.style.visibility="hidden",s.style.visibility="hidden",a.style.visibility="hidden",o.style.visibility="hidden",m.style.visibility="visible",m.style.opacity=100,d.style.visibility="visible")}}
