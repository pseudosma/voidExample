const ratio=window.devicePixelRatio||1,titleAnimation="text 17s ease-in-out 0s infinite",shiftingAnimation="shift 2s linear 0s infinite",small=500,extraWide=1800,extraExtraWide=2400;var isPlaying=!window.matchMedia("(prefers-reduced-motion)").matches,menuOpen=!1;const palette=[{f:"#aaafb9",bg:"none"},{f:"#FFF",bg:"none"},{f:"#000",bg:"#FFF"}];var cIndex=0;function animate(e,t){e.style.webkitAnimation=t,e.style.mozAnimation=t,e.style.oAnimation=t,e.style.msTransition=t,e.style.animation=t}function hideRevealPlayPauseButtons(){const e=document.getElementsByClassName("play"),t=document.getElementsByClassName("pause");if(isPlaying){for(i=0;i<e.length;i++)e[i].style.visibility="hidden";for(i=0;i<t.length;i++)t[i].style.visibility="visible"}else{for(i=0;i<e.length;i++)e[i].style.visibility="visible";for(i=0;i<t.length;i++)t[i].style.visibility="hidden"}}function commonPlayPause(){const e=document.getElementById("shifting-background");animate(e,isPlaying?"none":shiftingAnimation),isPlaying=!isPlaying,hideRevealPlayPauseButtons()}function commonScaleElements(e){var t;if(window.innerWidth<500){const e=document.getElementsByClassName("td-hidden-at-small");for(i=0;i<e.length;i++)e[i].style.display="none"}else{const e=document.getElementsByClassName("td-hidden-at-small");for(i=0;i<e.length;i++)e[i].style.display="table-cell"}t=window.innerWidth>2400?2:1;const n=document.getElementById("menu-wrapper");if(!e&&!0===hasNavigated){menuOpen=!1;const e=document.getElementById("stop-button"),t=document.getElementsByClassName("menu"),s=document.getElementsByClassName("menu-items");for(animate(n,null),animate(e,null),i=0;i<t.length;i++)animate(t[i],null);for(i=0;i<s.length;i++)animate(s[i],null)}const s=getComputedStyle(document.documentElement).getPropertyValue("--scale");if(s!=t){for(document.documentElement.style.setProperty("--scale",t),i=0;i<n.childElementCount;i++)if(n.children[i].classList.contains("unscalable")){const e=[];for(e.push({k:"r",v:n.children[i].getAttribute("r")}),e.push({k:"x",v:n.children[i].getAttribute("x")}),e.push({k:"y",v:n.children[i].getAttribute("y")}),e.push({k:"cx",v:n.children[i].getAttribute("cx")}),e.push({k:"cy",v:n.children[i].getAttribute("cy")}),e.push({k:"rx",v:n.children[i].getAttribute("rx")}),e.push({k:"ry",v:n.children[i].getAttribute("ry")}),e.push({k:"width",v:n.children[i].getAttribute("width")}),e.push({k:"height",v:n.children[i].getAttribute("height")}),e.push({k:"stroke-width",v:n.children[i].getAttribute("stroke-width")}),ii=0;ii<e.length;ii++)if(e[ii]){var l=parseInt(e[ii].v);l==l&&(s<t?l*=2:l/=2,n.children[i].setAttribute(e[ii].k,l))}const u=n.children[i].getAttribute("points");if(u){var a="";const e=u.split(" ");for(iii=0;iii<e.length;iii++){iii>0&&iii<e.length&&(a+=" ");const i=e[iii].split(",");var o=parseInt(i[0]),r=parseInt(i[1]);s<t?(o*=2,r*=2):(o/=2,r/=2),a=a+o+","+r}n.children[i].setAttribute("points",a)}}else n.children[i].classList.contains("menu")&&n.setAttribute("height",n.children[i].getAttribute("width")+7);document.documentElement.style.setProperty("--scale",t)}}function commonLoad(){hideRevealPlayPauseButtons();const e=window.location.search.replace("?","").split("&");for(i=0;i<e.length;i++){const t=e[i].toLowerCase();if("pause"==t){playPause&&playPause();break}if(t.includes("palette"))try{const t=e[i].split("=");changeColor(parseInt(t[1]))}catch{}}return e}function toggleMenu(){const e=document.getElementsByClassName("menu"),t=document.getElementsByClassName("menu-item"),n=document.getElementById("menu-wrapper"),s=document.getElementById("stop-button");if(menuOpen){for(i=0;i<t.length;i++)animate(t[i],"hideMenuItems 0.5s ease-in-out 0s forwards");for(i=0;i<e.length;i++)animate(e[i],"closeMenu 0.5s ease-in-out 0s forwards");animate(n,"closeMenu2 0.5s ease-in-out 0s forwards"),animate(s,"closeStopButton 0.5s ease-in-out 0s forwards")}else{for(i=0;i<t.length;i++){const e=i<10?"0"+i:i;animate(t[i],"revealMenuItems 0.5s ease-in-out 0."+e+"s forwards")}for(i=0;i<e.length;i++)animate(e[i],"openMenu 0.5s ease-in-out 0s forwards");animate(n,"openMenu2 0.5s ease-in-out 0s forwards"),animate(s,"openStopButton 0.5s ease-in-out 0s forwards")}menuOpen=!menuOpen}function changeColor(e){e&&e<palette.length?cIndex=e:cIndex>=palette.length-1?cIndex=0:cIndex+=1,document.documentElement.style.setProperty("--defaultTextColor",palette[cIndex].f);var t=palette[cIndex].bg;document.documentElement.style.setProperty("--defaultBackgroundColor",t)}function link(e,t){var i="";i=t||"?",isPlaying||(i+=("?"===i?"":"&")+"pause"),cIndex>0&&(i+=("?"===i?"":"&")+"palette="+cIndex),window.location.href=e+i}function home(e){link(e,"?skip")}function scaleInnerCircles(e,t){const n=document.getElementsByClassName("inner-circle");for(i=0;i<n.length;i++){n[i].setAttribute("cx",t/2+"px"),n[i].setAttribute("cy",e/2+"px");var s=t/3;t>e&&(s=e/3),s<100&&(s=100),n[i].setAttribute("r",s+"px")}}
function scaleElements(){window.scrollTo(0,0);const e=window.innerHeight,t=window.innerWidth;scaleInnerCircles(e,t);var n="24pt";t>small&&(n="48px"),t>extraWide&&(n="64px"),t>extraExtraWide&&(n="72px");const i=document.getElementById("title"),l=document.getElementById("animated-title");i.style.fontSize=n,l.style.fontSize=n;const o=t/2-i.getBoundingClientRect().width/2;i.style.left=o+"px",l.style.left=o+"px",i.style.top=e/2+"px",l.style.top=e/2+"px"}function playPause(){const e=document.getElementById("animated-title");isPlaying?animate(e,"none"):animate(e,titleAnimation),commonPlayPause()}function load(){scaleElements();const e=document.getElementsByClassName("circle");for(i=0;i<e.length;i++)e[i].style.visibility="visible";document.getElementById("title-wrapper").style.visibility="visible",commonLoad()}window.onload=load,window.addEventListener("resize",scaleElements);
